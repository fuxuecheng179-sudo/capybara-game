System.register("chunks:///_virtual/AimLineController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,o,r,l,s,a,u,h,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,l=i._decorator,s=i.Node,a=i.Prefab,u=i.v2,h=i.instantiate,c=i.Component}],execute:function(){var m,p,d,f,y,T,b,A,g,v;r._RF.push({},"1b63bQeuVNNEqK8Zx1BImD2","AimLineController",void 0);var C=l.ccclass,_=l.property;i("PlayerController",(m=C("PlayerController"),p=_({type:s,tooltip:"请拖入 AimSystem 节点"}),d=_({type:a,tooltip:"请拖入子弹预制体"}),f=_({type:s,tooltip:"请拖入 BulletContainer 节点"}),m((b=t((T=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return t=i.call.apply(i,[this].concat(r))||this,n(t,"aimSystemNode",b,o(t)),n(t,"bulletPrefab",A,o(t)),n(t,"bulletContainer",g,o(t)),n(t,"bulletSpeed",v,o(t)),t._isAiming=!1,t._aimDirection=u(0,1),t}e(t,i);var r=t.prototype;return r.start=function(){this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.hideAim()},r.onDestroy=function(){this.node.off(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchStart=function(i){this._isAiming=!0,this.toggleAim(!0),this.updateAimDir(i)},r.onTouchMove=function(i){this._isAiming&&this.updateAimDir(i)},r.onTouchEnd=function(i){this._isAiming&&(this._isAiming=!1,this.toggleAim(!1),this.updateAimDir(i),this.fireBullet())},r.updateAimDir=function(i){var t=i.getUILocation(),e=this.node.worldPosition,n=u(t.x-e.x,t.y-e.y).normalize();if(n.length()>0&&(this._aimDirection=n),this.aimSystemNode){var o=this.aimSystemNode.getComponent("AimTracer");o&&o.updateAimLine&&o.updateAimLine(e,this._aimDirection)}},r.toggleAim=function(i){if(this.aimSystemNode){var t=this.aimSystemNode.getComponent("AimTracer");i||t&&t.clearLine&&t.clearLine()}},r.hideAim=function(){if(this.aimSystemNode){var i=this.aimSystemNode.getComponent("AimTracer");i&&i.clearLine&&i.clearLine()}},r.fireBullet=function(){if(this.bulletPrefab&&this.bulletContainer){var i=h(this.bulletPrefab);i.parent=this.bulletContainer;var t=this.node.worldPosition.clone();t.y+=60,i.setWorldPosition(t);var e=i.getComponent("cc.RigidBody2D");e&&(e.linearVelocity=u(this._aimDirection.x*this.bulletSpeed,this._aimDirection.y*this.bulletSpeed))}},t}(c)).prototype,"aimSystemNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(T.prototype,"bulletPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(T.prototype,"bulletContainer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(T.prototype,"bulletSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1500}}),y=T))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/AimTracer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,s,a,h,c,l,p,u,d,g,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Node,h=e.Graphics,c=e.CCFloat,l=e.v3,p=e.v2,u=e.Vec2,d=e.UITransform,g=e.PhysicsSystem2D,m=e.ERaycast2DType,f=e.Component}],execute:function(){var y,b,v,_,D,L,x,A,N,S,w,z,T,C,R,M,P,O,W,F,U;o._RF.push({},"46089rPh/FO5LbQH4onWUlw","AimTracer",void 0);var I=s.ccclass,k=s.property;e("AimTracer",(y=I("AimTracer"),b=k({type:a,tooltip:"请拖入 Reticle (准心) 节点"}),v=k((function(){return h})),_=k({type:c}),D=k({type:c}),L=k({type:c}),x=k({type:c}),A=k({type:c}),N=k({type:c}),S=k({type:c}),y((T=t((z=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,r(t,"reticleNode",T,n(t)),r(t,"graphics",C,n(t)),r(t,"lineWidth",R,n(t)),r(t,"dashLength",M,n(t)),r(t,"gapLength",P,n(t)),r(t,"animSpeed",O,n(t)),r(t,"smoothSpeed",W,n(t)),r(t,"bounceLength",F,n(t)),r(t,"maxAimDistance",U,n(t)),t._dashOffset=0,t._isAiming=!1,t._currentStart=l(),t._targetDir=p(0,1),t._smoothDir=p(0,1),t}i(t,e);var o=t.prototype;return o.start=function(){this.clearLine(),this.graphics&&(this.graphics.lineJoin=h.LineJoin.ROUND,this.graphics.lineCap=h.LineCap.ROUND)},o.update=function(e){if(this._isAiming&&this.graphics){var t=this.dashLength+this.gapLength;this._dashOffset-=e*this.animSpeed,this._dashOffset<0&&(this._dashOffset+=t);var i=Math.min(1,e*this.smoothSpeed);u.lerp(this._smoothDir,this._smoothDir,this._targetDir,i),this._smoothDir.normalize(),this.node.parent&&this.node.setSiblingIndex(this.node.parent.children.length-1),this.renderAimProcess()}},o.updateAimLine=function(e,t){this._currentStart.set(e),this._targetDir.set(t),this._isAiming||this._smoothDir.set(t),this._isAiming=!0,this.reticleNode&&(this.reticleNode.active=!0)},o.getSmoothDirection=function(){return this._smoothDir.clone()},o.clearLine=function(){this._isAiming=!1,this.graphics&&this.graphics.clear(),this.reticleNode&&(this.reticleNode.active=!1)},o.renderAimProcess=function(){this.graphics.clear(),this.graphics.lineWidth=this.lineWidth;var e=this.node.getComponent(d),t=p(this._currentStart.x,this._currentStart.y),i=this._smoothDir,r=p(t.x+i.x*this.maxAimDistance,t.y+i.y*this.maxAimDistance),n=4294967295,o=g.instance.raycast(t,r,m.Closest,n),s=e.convertToNodeSpaceAR(l(t.x,t.y,0));if(o.length>0){var a=o[0],h=a.point,c=a.normal,u=a.collider.node,f=e.convertToNodeSpaceAR(l(h.x,h.y,0));if(this.drawMovingDashedLine(s,f),u.getComponent("Enemy")||u.name.toLowerCase().includes("enemy"))this.reticleNode&&this.reticleNode.setPosition(f);else{var y=i.clone().normalize(),b=y.subtract(c.clone().multiplyScalar(2*y.dot(c))),v=p(h.x+1*b.x,h.y+1*b.y),_=p(v.x+b.x*this.bounceLength,v.y+b.y*this.bounceLength),D=g.instance.raycast(v,_,m.Closest,n),L=l(_.x,_.y,0);D.length>0&&(L=l(D[0].point.x,D[0].point.y,0));var x=e.convertToNodeSpaceAR(L);this.drawMovingDashedLine(f,x),this.reticleNode&&this.reticleNode.setPosition(x)}}else{var A=l(r.x,r.y,0),N=e.convertToNodeSpaceAR(A);this.drawMovingDashedLine(s,N),this.reticleNode&&this.reticleNode.setPosition(N)}this.graphics.stroke()},o.drawMovingDashedLine=function(e,t){var i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r);if(!(n<=0))for(var o=i/n,s=r/n,a=this.dashLength+this.gapLength,h=-this._dashOffset;h<n;){var c=h,l=h+this.dashLength;if(l>0&&c<n){var p=Math.max(0,c),u=Math.min(n,l);this.graphics.moveTo(e.x+o*p,e.y+s*p),this.graphics.lineTo(e.x+o*u,e.y+s*u)}h+=a}},t}(f)).prototype,"reticleNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(z.prototype,"graphics",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"lineWidth",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),M=t(z.prototype,"dashLength",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=t(z.prototype,"gapLength",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),O=t(z.prototype,"animSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),W=t(z.prototype,"smoothSpeed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),F=t(z.prototype,"bounceLength",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),U=t(z.prototype,"maxAimDistance",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2e3}}),w=z))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,t,e,u,a,n,r,s,c,l,d,p;return{setters:[function(i){o=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,u=i.assertThisInitialized,a=i.createClass},function(i){n=i.cclegacy,r=i._decorator,s=i.AudioClip,c=i.director,l=i.AudioSource,d=i.resources,p=i.Component}],execute:function(){var h,y,_,f,S,g;n._RF.push({},"63164uystFGxLIe793P9M64","AudioManager",void 0);var M=r.ccclass,v=r.property;i("AudioManager",(h=M("AudioManager"),y=v({type:s}),h(((g=function(i){function o(){for(var o,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(o=i.call.apply(i,[this].concat(a))||this)._audioSource=null,o._clips=new Map,e(o,"defaultBGM",S,u(o)),o}t(o,i);var n=o.prototype;return n.onLoad=function(){o._inst?this.node.destroy():(o._inst=this,c.addPersistRootNode(this.node),this._audioSource=this.getComponent(l)||this.addComponent(l),this.defaultBGM&&this.playBGM(this.defaultBGM))},n.playBGM=function(i){if("string"==typeof i)this.loadAndPlay(i,!0);else{if(this._audioSource.clip===i&&this._audioSource.playing)return;this._audioSource.stop(),this._audioSource.clip=i,this._audioSource.loop=!0,this._audioSource.play()}},n.playSFX=function(i,o){void 0===o&&(o=1),"string"==typeof i?this.loadAndPlay(i,!1,o):this._audioSource.playOneShot(i,o)},n.stopBGM=function(){this._audioSource&&this._audioSource.stop()},n.pauseBGM=function(){this._audioSource&&this._audioSource.playing&&this._audioSource.pause()},n.resumeBGM=function(){this._audioSource&&this._audioSource.clip&&!this._audioSource.playing&&this._audioSource.play()},n.loadAndPlay=function(i,o,t){var e=this;if(void 0===t&&(t=1),this._clips.has(i)){var u=this._clips.get(i);o?this.playBGM(u):this.playSFX(u,t)}else d.load(i,s,(function(u,a){u?console.error("[AudioManager] 资源加载失败，请检查路径: "+i,u):(console.log("[AudioManager] 成功加载音效: "+i),e._clips.set(i,a),o?e.playBGM(a):e.playSFX(a,t))}))},n.setVolume=function(i){this._audioSource.volume=i},a(o,null,[{key:"inst",get:function(){return this._inst}}]),o}(p))._inst=void 0,S=o((f=g).prototype,"defaultBGM",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=f))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./PlayerController.ts","./GameManager.ts"],(function(i){var e,t,n,o,a,r,l,s,d,c,u,h,p,f,g,y,b,m,v,w,B,P,S;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,r=i._decorator,l=i.Prefab,s=i.Node,d=i.RigidBody2D,c=i.Collider2D,u=i.find,h=i.Contact2DType,p=i.Vec3,f=i.Sprite,g=i.Color,y=i.UIOpacity,b=i.tween,m=i.instantiate,v=i.Vec2,w=i.Component},function(i){B=i.Enemy},function(i){P=i.PlayerController},function(i){S=i.GameManager}],execute:function(){var C,D,x,E,R,V,k,z,M,T,A,G,I,F,N,L,O,_,J,W,j,H,K,U,X;a._RF.push({},"f00366Pm+JCKpnNyV9fnFXF","Ball",void 0);var q=r.ccclass,Q=r.property;i("Ball",(C=q("Ball"),D=Q({type:l,tooltip:"爆炸视觉特效"}),x=Q({type:l,tooltip:"范围指示器预制体"}),E=Q({tooltip:"爆炸波及半径"}),R=Q({tooltip:"爆炸造成的伤害比例"}),V=Q({type:s,tooltip:"子弹的外观节点"}),k=Q({tooltip:"产生残影的间隔"}),z=Q({tooltip:"残影消失的时间"}),C((A=e((T=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=i.call.apply(i,[this].concat(a))||this,n(e,"minDamage",A,o(e)),n(e,"maxDamage",G,o(e)),n(e,"critRate",I,o(e)),n(e,"critMultiplier",F,o(e)),n(e,"explosionPrefab",N,o(e)),n(e,"rangeIndicatorPrefab",L,o(e)),n(e,"aoeRadius",O,o(e)),n(e,"aoeDamageRatio",_,o(e)),n(e,"speedGrowthRate",J,o(e)),n(e,"maxSpeedDamageMult",W,o(e)),n(e,"bulletVisual",j,o(e)),n(e,"ghostInterval",H,o(e)),n(e,"ghostFadeDuration",K,o(e)),n(e,"magnetRadius",U,o(e)),n(e,"absorbSpeed",X,o(e)),e.rigidBody=null,e.collider=null,e.playerNode=null,e.isAbsorbing=!1,e.canBeRecovered=!1,e.isJustBorn=!0,e.isExplosive=!1,e.pierceLeft=0,e.isSpeedScaling=!1,e.hasTorrent=!1,e.hasPoison=!1,e.hasStun=!1,e.skillConfidence=0,e.skillCounter=0,e.skillExpBoost=0,e.initialSpeed=0,e.ghostTimer=0,e}t(e,i);var a=e.prototype;return a.onLoad=function(){this.rigidBody=this.getComponent(d),this.collider=this.getComponent(c),this.playerNode=u("Canvas/GameWorld/Player_Capybara")},a.start=function(){var i=this;this.rigidBody&&(this.rigidBody.gravityScale=0,this.initialSpeed=this.rigidBody.linearVelocity.length()),this.collider&&this.collider.on(h.BEGIN_CONTACT,this.onBeginContact,this),this.scheduleOnce((function(){i.isJustBorn=!1}),.15),this.scheduleOnce((function(){i.canBeRecovered=!0}),.5)},a.onBeginContact=function(i,e,t){var n;if(!this.isAbsorbing&&!this.isJustBorn&&null!=(n=this.node)&&n.isValid){var o=this.findEnemyInParent(e.node);if(o){S.instance&&S.instance.addCombo();var a=this.calculateFinalDamage();this.applySkillEffectsToEnemy(o),o.takeDamage(a),this.isExplosive&&this.triggerAoeExplosion(a),this.pierceLeft>0&&(this.pierceLeft--,t&&(t.disabled=!0))}}},a.setupSkill=function(i){this.isExplosive=i.isExplosive||!1,this.pierceLeft=i.pierceCount||0,this.isSpeedScaling=i.isSpeedScaling||!1,this.hasTorrent=i.isTorrent||!1,this.hasPoison=i.isPoison||!1,this.hasStun=i.isLightning||!1,this.skillConfidence=i.confidenceLevel||0,this.skillCounter=i.lateBloomerLevel||0,this.skillExpBoost=i.expGainLevel||0},a.update=function(i){var e,t,n;if(null!=(e=this.node)&&e.isValid&&!this.isJustBorn)if(this.isAbsorbing)this.performAbsorb();else if(null!=(t=this.rigidBody)&&t.enabled){if(this.isSpeedScaling){var o=this.rigidBody.linearVelocity,a=o.length();if(a>0){var r=a*(1+this.speedGrowthRate*i);this.rigidBody.linearVelocity=o.normalize().multiplyScalar(r)}this.updateGhostEffect(i)}if(this.canBeRecovered&&null!=(n=this.playerNode)&&n.isValid)p.distance(this.node.worldPosition,this.playerNode.worldPosition)<this.magnetRadius&&this.rigidBody.linearVelocity.y<0&&this.startAbsorbing()}},a.updateGhostEffect=function(i){this.ghostTimer+=i,this.ghostTimer>=this.ghostInterval&&(this.ghostTimer=0,this.createGhost())},a.createGhost=function(){if(this.bulletVisual&&this.node.parent){var i=new s("Ghost");i.parent=this.node.parent,i.setWorldPosition(this.node.worldPosition),i.setScale(this.node.scale);var e=this.bulletVisual.getComponent(f);if(e){var t=i.addComponent(f);t.spriteFrame=e.spriteFrame,t.color=new g(200,200,255,150)}var n=i.addComponent(y);b(n).to(this.ghostFadeDuration,{opacity:0}).call((function(){i.isValid&&i.destroy()})).start(),b(i).to(this.ghostFadeDuration,{scale:new p(.5*this.node.scale.x,.5*this.node.scale.y,1)}).start()}},a.applySkillEffectsToEnemy=function(i){var e=i;this.hasTorrent&&e.applyTorrent&&e.applyTorrent(3),this.hasPoison&&e.applyPoison&&e.applyPoison(4),this.hasStun&&e.applyStun&&e.applyStun(1.2),this.skillExpBoost>0&&e.markAsExpBonus&&e.markAsExpBonus(this.skillExpBoost)},a.triggerAoeExplosion=function(i){var e=this;if(this.explosionPrefab&&this.node.isValid){var t=m(this.explosionPrefab);t.parent=this.node.parent,t.worldPosition=this.node.worldPosition}if(this.rangeIndicatorPrefab&&this.node.isValid){var n=m(this.rangeIndicatorPrefab);n.parent=this.node.parent,n.worldPosition=this.node.worldPosition;var o=2*this.aoeRadius/100;n.setScale(new p(0,0,1));var a=n.getComponent(y)||n.addComponent(y);a.opacity=200,b(n).to(.2,{scale:new p(o,o,1)},{easing:"sineOut"}).start(),b(a).delay(.1).to(.2,{opacity:0},{easing:"sineIn"}).call((function(){n.isValid&&n.destroy()})).start()}if(S.instance){S.instance.playScreenShake(8);var r=[].concat(S.instance.activeEnemies),l=this.node.worldPosition;r.forEach((function(t){var n;if(null!=t&&null!=(n=t.node)&&n.isValid){var o=p.distance(l,t.node.worldPosition);o>0&&o<=e.aoeRadius&&t.takeDamage(Math.floor(i*e.aoeDamageRatio))}}))}},a.findEnemyInParent=function(i){for(var e=i;e;){var t=e.getComponent(B);if(t)return t;e=e.parent}return null},a.calculateFinalDamage=function(){var i,e=Math.floor(Math.random()*(this.maxDamage-this.minDamage+1))+this.minDamage;if(this.skillConfidence>0&&(e+=Math.floor(e*(.15*this.skillConfidence))),this.skillCounter>0&&S.instance&&(e+=2*S.instance.waveCount*this.skillCounter),this.isSpeedScaling&&null!=(i=this.rigidBody)&&i.enabled&&this.initialSpeed>0){var t=Math.min(this.rigidBody.linearVelocity.length()/this.initialSpeed,this.maxSpeedDamageMult);e=Math.floor(e*t)}return Math.random()<this.critRate&&(e=Math.floor(e*this.critMultiplier)),Math.floor(e)},a.startAbsorbing=function(){var i=this;this.isAbsorbing||(this.isAbsorbing=!0,this.scheduleOnce((function(){var e;null!=(e=i.node)&&e.isValid&&(i.rigidBody&&(i.rigidBody.linearVelocity=new v(0,0),i.rigidBody.enabled=!1),i.collider&&(i.collider.enabled=!1))})))},a.performAbsorb=function(){var i;if(null!=(i=this.playerNode)&&i.isValid){var e=this.node.worldPosition,t=this.playerNode.worldPosition,n=new p;p.lerp(n,e,t,this.absorbSpeed),this.node.setWorldPosition(n),p.distance(e,t)<40&&this.onRecycled()}},a.onRecycled=function(){var i,e;if(null!=(i=this.playerNode)&&i.isValid){var t=this.playerNode.getComponent(P);t&&t.onBallRecycled(this.node)}null!=(e=this.node)&&e.isValid&&this.node.destroy()},e}(w)).prototype,"minDamage",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),G=e(T.prototype,"maxDamage",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 18}}),I=e(T.prototype,"critRate",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),F=e(T.prototype,"critMultiplier",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),N=e(T.prototype,"explosionPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(T.prototype,"rangeIndicatorPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(T.prototype,"aoeRadius",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),_=e(T.prototype,"aoeDamageRatio",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),J=e(T.prototype,"speedGrowthRate",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),W=e(T.prototype,"maxSpeedDamageMult",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),j=e(T.prototype,"bulletVisual",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(T.prototype,"ghostInterval",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),K=e(T.prototype,"ghostFadeDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),U=e(T.prototype,"magnetRadius",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),X=e(T.prototype,"absorbSpeed",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),M=T))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/BulletPhysics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,s,i,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,s=e.Collider2D,i=e.Contact2DType,c=e.Component}],execute:function(){var r;t._RF.push({},"6511dMvjg1Fk5ulsXEqTCN6","BulletPhysics",void 0);var l=o.ccclass;o.property,e("BulletPhysics",l("BulletPhysics")(r=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.start=function(){var e=this.getComponent(s);e&&e.on(i.BEGIN_CONTACT,this.onBeginContact,this)},o.onBeginContact=function(e,n,t){(n.node.name.includes("Monster")||n.node.name.includes("Enemy")||"BlueSlime"==n.node.name)&&console.log("子弹击中了怪物！"),this.node.position.y<-1e3&&this.node.destroy()},t}(c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,a,s,l,o,c,r,h,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){s=i.cclegacy,l=i._decorator,o=i.Sprite,c=i.v3,r=i.tween,h=i.Color,p=i.Component}],execute:function(){var _,u,d,y,S;s._RF.push({},"6b9f2snut9CCpp55P51LpWt","CharacterAnim",void 0);var P=l.ccclass,f=l.property;i("CharacterAnim",(_=P("CharacterAnim"),u=f(o),_((S=t((y=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),l=0;l<e;l++)s[l]=arguments[l];return t=i.call.apply(i,[this].concat(s))||this,n(t,"characterSprite",S,a(t)),t._initialScale=c(1,1,1),t._initialPos=c(0,0,0),t._isSpecialAnimPlaying=!1,t._idleTween=null,t}e(t,i);var s=t.prototype;return s.onLoad=function(){this._initialScale=this.node.scale.clone(),this._initialPos=this.node.position.clone()},s.start=function(){this.playVerticalIdle()},s.playVerticalIdle=function(){var i=this;if(!this._isSpecialAnimPlaying){this._idleTween&&(this._idleTween.stop(),this._idleTween=null),r(this.node).stop();var t=c(1.015*this._initialScale.x,.985*this._initialScale.y,1),e=c(this._initialPos.x,this._initialPos.y-2,this._initialPos.z),n=this._initialScale.clone(),a=c(this._initialPos.x,this._initialPos.y+3,this._initialPos.z);r(this.node).to(.4,{scale:this._initialScale,position:this._initialPos},{easing:"sineOut"}).call((function(){i._idleTween=r(i.node).repeatForever(r().to(1.5,{scale:t,position:e},{easing:"sineInOut"}).to(1.5,{scale:n,position:a},{easing:"sineInOut"})).start()})).start()}},s.onAttack=function(){var i=this;this._isSpecialAnimPlaying=!0,this._idleTween&&this._idleTween.stop(),r(this.node).stop();var t=c(1.08*this._initialScale.x,.92*this._initialScale.y,1),e=c(.98*this._initialScale.x,1.04*this._initialScale.y,1);r(this.node).to(.05,{scale:t},{easing:"sineOut"}).to(.1,{scale:e},{easing:"sineIn"}).to(.5,{scale:this._initialScale},{easing:"elasticOut"}).call((function(){i._isSpecialAnimPlaying=!1,i.playVerticalIdle()})).start()},s.onReceive=function(){var i=this;this._isSpecialAnimPlaying=!0,this._idleTween&&this._idleTween.stop(),r(this.node).stop(),this.characterSprite&&r(this.characterSprite).to(.07,{color:new h(200,255,200,255)}).to(.25,{color:h.WHITE}).start();var t=c(this._initialPos.x,this._initialPos.y-10,this._initialPos.z),e=c(1.1*this._initialScale.x,.9*this._initialScale.y,1);r(this.node).to(.08,{position:t,scale:e},{easing:"quadOut"}).to(.5,{position:this._initialPos,scale:this._initialScale},{easing:"backOut"}).call((function(){i._isSpecialAnimPlaying=!1,i.playVerticalIdle()})).start()},t}(p)).prototype,"characterSprite",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/DamagePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n,o,r,c,l,p,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Label,l=t.UIOpacity,p=t.Vec3,s=t.tween,u=t.Component}],execute:function(){var y,h,b,f,g,d,m;o._RF.push({},"e44b4vi+a1HHratP4Yehb1b","DamagePopup",void 0);var w=r.ccclass,v=r.property;t("DamagePopup",(y=w("DamagePopup"),h=v(c),b=v(l),y((d=e((g=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"label",d,n(e)),a(e,"uiOpacity",m,n(e)),e}return i(e,t),e.prototype.showDamage=function(t){var e=this;this.label.string="-"+Math.floor(t).toString(),this.node.setScale(new p(.5,.5,1)),s(this.node).to(.1,{scale:new p(1.2,1.2,1)}).to(.1,{scale:new p(1,1,1)}).by(.8,{position:new p(0,50,0)},{easing:"smooth"}).call((function(){e.node.destroy()})).start(),this.uiOpacity&&(this.uiOpacity.opacity=255,s(this.uiOpacity).delay(.5).to(.3,{opacity:0}).start())},e}(u)).prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(g.prototype,"uiOpacity",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(i){var t,e,n,a,o,s,r,l,p,h,d,c,u,f,y,m,b,g,S,v,w,P;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,r=i.Label,l=i.ProgressBar,p=i.Sprite,h=i.Prefab,d=i.AudioClip,c=i.Vec3,u=i.Color,f=i.tween,y=i.Animation,m=i.Layers,b=i.RigidBody2D,g=i.Collider2D,S=i.UIOpacity,v=i.instantiate,w=i.Component},function(i){P=i.AudioManager}],execute:function(){var D,H,x,_,C,E,A,M,O,I,L,T,z,B,k,F,G,V,X,R,U,W,Y;o._RF.push({},"90c18dWDP9MbaiopcyJV6m8","Enemy",void 0);var q=s.ccclass,j=s.property;i("Enemy",(D=q("Enemy"),H=j({type:r}),x=j({type:l}),_=j({type:p}),C=j({type:h}),E=j({type:h}),A=j({type:h}),M=j({type:d,tooltip:"怪物受击音效"}),O=j({type:d,tooltip:"怪物死亡音效"}),I=j({tooltip:"触发离场动画的 Y 坐标阈值"}),L=j({tooltip:"怪物在遮罩外的额外移动距离"}),D((B=t((z=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return t=i.call.apply(i,[this].concat(o))||this,n(t,"hpLabel",B,a(t)),n(t,"hpBar",k,a(t)),n(t,"displaySprite",F,a(t)),n(t,"damagePopupPrefab",G,a(t)),n(t,"deathEffectPrefab",V,a(t)),n(t,"xpOrbPrefab",X,a(t)),n(t,"hitSound",R,a(t)),n(t,"deathSound",U,a(t)),n(t,"disappearThresholdY",W,a(t)),n(t,"offsetDistance",Y,a(t)),t.maxHp=100,t.currentHp=100,t.initialScale=new c(1,1,1),t.isHitAnimating=!1,t.isDead=!1,t._isStunned=!1,t._isPoisoned=!1,t._isTorrenting=!1,t._expGainLevel=0,t}e(t,i);var o=t.prototype;return o.onLoad=function(){this.node.scale.x>.1&&(this.initialScale=this.node.scale.clone())},o.start=function(){var i=this;this.scheduleOnce((function(){i.node&&i.node.isValid&&i.playIdleAnimation()}),.1)},o.applyPoison=function(i){var t=this;if(!this.isDead&&!this._isPoisoned){this._isPoisoned=!0,this.displaySprite&&(this.displaySprite.color=new u(190,0,255,255));var e=Math.max(5,Math.floor(.1*this.maxHp));this.takeDamage(e,2),this.scheduleOnce((function(){t._isPoisoned=!1,!t.isDead&&t.displaySprite&&(t.displaySprite.color=u.WHITE)}),i)}},o.applyStun=function(i){var t=this;this.isDead||this._isStunned||(this._isStunned=!0,this.displaySprite&&(this.displaySprite.color=new u(255,255,150,255)),f(this.node).by(.05,{position:new c(5,0,0)}).by(.05,{position:new c(-10,0,0)}).by(.05,{position:new c(5,0,0)}).union().repeat(Math.floor(i/.15)).start(),this.scheduleOnce((function(){t._isStunned=!1,!t.isDead&&t.displaySprite&&(t.displaySprite.color=u.WHITE)}),i))},o.applyTorrent=function(i){var t=this;this.isDead||this._isTorrenting||(this._isTorrenting=!0,this.displaySprite&&(this.displaySprite.color=new u(100,150,255,255)),this.schedule((function(){t.isDead||t.takeDamage(8,3)}),.5,2*i-1),this.scheduleOnce((function(){t._isTorrenting=!1,!t.isDead&&t.displaySprite&&(t.displaySprite.color=u.WHITE)}),i))},o.markAsExpBonus=function(i){this._expGainLevel=i},o.moveDown=function(i,t){var e=this;if(void 0===t&&(t=.3),!this.isDead&&!this._isStunned){var n=this.node.position,a=new c(n.x,n.y-i,n.z);f(this.node).to(t,{position:a},{easing:"backOut"}).call((function(){e.node.position.y<=e.disappearThresholdY&&e.playExitAnimation()})).start()}},o.playIdleAnimation=function(){var i=this.getComponent(y);if(i&&i.defaultClip){var t=i.getState(i.defaultClip.name);t&&(t.speed=.8+.4*Math.random(),t.setTime(Math.random()*t.duration),t.isPlaying||i.play())}},o.init=function(i){this.maxHp=i,this.currentHp=i,this.isDead=!1,this.node.layer=m.Enum.DEFAULT,this.updateHpUI(),this.node.scale.x>.1&&(this.initialScale=this.node.scale.clone());var t=this.getComponent(b);t&&(t.enabled=!0);var e=this.getComponent(g);e&&(e.enabled=!0),this.hpBar&&(this.hpBar.node.active=!0);var n=this.node.getComponent(S);n&&(n.opacity=255)},o.playEntranceAnimation=function(i,t,e,n){var a=this;void 0===n&&(n=0),f(this.node).stop(),this.node.setPosition(t),this.node.setScale(new c(.01,.01,1)),this.node.active=!0;var o=this.node.getComponent(S);o||(o=this.node.addComponent(S)),o.opacity=255,this.scheduleOnce((function(){if(a.node&&a.node.isValid){f(a.node).to(.15,{scale:new c(1.1*a.initialScale.x,1.1*a.initialScale.y,1)},{easing:"backOut"}).to(.2,{position:e},{easing:"quadIn"}).call((function(){var i=new c(1.2*a.initialScale.x,.8*a.initialScale.y,1);f(a.node).to(.05,{scale:i}).to(.3,{scale:a.initialScale},{easing:"elasticOut"}).start()})).start()}}),n)},o.playExitAnimation=function(){var i=this;if(!this.isDead){this.isDead=!0;var t=this.node.scene.getComponentInChildren("GameManager");t&&t.removeEnemy(this);var e=this.getComponent(g);e&&(e.enabled=!1);var n=new c(this.node.position.x,this.node.position.y-this.offsetDistance,0);f(this.node).to(.25,{position:n},{easing:"quadIn"}).call((function(){i.node&&i.node.isValid&&i.node.destroy()})).start()}},o.takeDamage=function(i,t){if(void 0===t&&(t=4),!(this.isDead||this.currentHp<=0)){if(P.inst&&(this.hitSound?P.inst.playSFX(this.hitSound):P.inst.playSFX("Hitted_Body01")),t>0){var e=this.node.scene.getComponentInChildren("GameManager");e&&e.playScreenShake&&e.playScreenShake(t)}this.currentHp-=i,this.currentHp<0&&(this.currentHp=0),this.updateHpUI(),this.isHitAnimating||this.playHitAnimation(),this.spawnDamagePopup(i),this.currentHp<=0&&this.die()}},o.updateHpUI=function(){this.hpLabel&&(this.hpLabel.string=Math.floor(this.currentHp).toString()),this.hpBar&&(this.hpBar.progress=this.currentHp/this.maxHp)},o.playHitAnimation=function(){var i=this;this.isHitAnimating=!0;var t=new c(.85*this.initialScale.x,.85*this.initialScale.y,1);f(this.node).to(.05,{scale:t}).to(.4,{scale:this.initialScale},{easing:"elasticOut"}).call((function(){i.isHitAnimating=!1})).start(),this.flashRed()},o.flashRed=function(){var i=this;if(this.displaySprite&&!this._isPoisoned&&!this._isStunned&&!this._isTorrenting){var t=u.WHITE;this.displaySprite.color=new u(255,100,100,255),this.scheduleOnce((function(){!i.isDead&&i.node&&i.node.isValid&&i.displaySprite&&(i.displaySprite.color=t)}),.1)}},o.spawnDamagePopup=function(i){if(this.damagePopupPrefab){var t=v(this.damagePopupPrefab);this.node.parent&&(this.node.parent.addChild(t),t.setPosition(this.node.position.x,this.node.position.y+50,0));var e=t.getComponent("DamagePopup");e&&e.showDamage(i)}},o.die=function(){var i=this;if(!this.isDead){this.isDead=!0,P.inst&&(this.deathSound?P.inst.playSFX(this.deathSound):P.inst.playSFX("diaoxiang_normal")),this.unscheduleAllCallbacks();var t=this.node.scene.getComponentInChildren("GameManager");t&&t.removeEnemy(this),this.hpBar&&(this.hpBar.node.active=!1),this.hpLabel&&(this.hpLabel.node.active=!1),this.spawnDeathEffect(),this.spawnXpOrb();var e=this.getComponent(g);e&&(e.enabled=!1),f(this.node).to(.2,{scale:new c(0,0,0)}).call((function(){i.node&&i.node.isValid&&i.node.destroy()})).start()}},o.spawnDeathEffect=function(){if(this.deathEffectPrefab){var i=v(this.deathEffectPrefab);this.node.parent&&(i.parent=this.node.parent,i.worldPosition=this.node.worldPosition)}},o.spawnXpOrb=function(){if(this.xpOrbPrefab){var i=Math.floor(3*Math.random())+3;this._expGainLevel>0&&(i+=Math.floor(i*(.3*this._expGainLevel)));for(var t=0;t<i;t++){var e=v(this.xpOrbPrefab);if(this.node.parent){e.parent=this.node.parent;var n=this.node.worldPosition.clone().add(new c(60*(Math.random()-.5),60*(Math.random()-.5),0));e.worldPosition=n}}}},t}(w)).prototype,"hpLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(z.prototype,"hpBar",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"displaySprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(z.prototype,"damagePopupPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"deathEffectPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(z.prototype,"xpOrbPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"hitSound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"deathSound",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(z.prototype,"disappearThresholdY",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-450}}),Y=t(z.prototype,"offsetDistance",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),T=z))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,r,a,l,s,c,u,p,h,y,f,d,T,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.Graphics,c=t.Prefab,u=t.Vec3,p=t.input,h=t.Input,y=t.UITransform,f=t.instantiate,d=t.RigidBody2D,T=t.Vec2,m=t.Component}],execute:function(){var v,b,_,g,C,E,L,N,j,A;r._RF.push({},"bea01LVOaZHrZqXHj/WK5Ns","GameController",void 0);var D=a.ccclass,H=a.property;t("GameController",(v=D("GameController"),b=H({type:l,tooltip:"发射子弹的起始位置节点（卡皮巴拉）"}),_=H({type:s,tooltip:"用于画瞄准线的Graphics组件"}),g=H({type:c,tooltip:"子弹预制体"}),v((L=e((E=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"playerNode",L,n(e)),o(e,"trajectoryLine",N,n(e)),o(e,"bulletPrefab",j,n(e)),o(e,"bulletSpeed",A,n(e)),e._isAiming=!1,e._aimDirection=new u,e}i(e,t);var r=e.prototype;return r.start=function(){p.on(h.EventType.TOUCH_START,this.onTouchStart,this),p.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(h.EventType.TOUCH_END,this.onTouchEnd,this),p.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.trajectoryLine&&this.trajectoryLine.clear()},r.onDestroy=function(){p.off(h.EventType.TOUCH_START,this.onTouchStart,this),p.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(h.EventType.TOUCH_END,this.onTouchEnd,this),p.off(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchStart=function(t){this._isAiming=!0,this.updateAiming(t)},r.onTouchMove=function(t){this._isAiming&&this.updateAiming(t)},r.onTouchEnd=function(t){this._isAiming&&(this._isAiming=!1,this.trajectoryLine.clear(),this.fireBullet())},r.updateAiming=function(t){var e,i=t.getUILocation(),o=(this.playerNode.getWorldPosition(),null==(e=this.playerNode.parent)?void 0:e.getComponent(y)),n=null==o?void 0:o.convertToNodeSpaceAR(new u(i.x,i.y,0));if(n){var r=new u(n.x-this.playerNode.position.x,n.y-this.playerNode.position.y,0);this._aimDirection=r.normalize(),this.drawTrajectory(this.playerNode.position,this._aimDirection)}},r.drawTrajectory=function(t,e){this.trajectoryLine.clear(),this.trajectoryLine.lineWidth=5,this.trajectoryLine.strokeColor.fromHEX("#FFFFFF"),this.trajectoryLine.moveTo(t.x,t.y);var i=t.clone().add(e.clone().multiplyScalar(300));this.trajectoryLine.lineTo(i.x,i.y),this.trajectoryLine.stroke()},r.fireBullet=function(){if(this.bulletPrefab){var t=f(this.bulletPrefab);t.parent=this.playerNode.parent,t.position=this.playerNode.position;var e=t.getComponent(d);if(e){var i=new T(this._aimDirection.x*this.bulletSpeed,this._aimDirection.y*this.bulletSpeed);e.linearVelocity=i}}},e}(m)).prototype,"playerNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(E.prototype,"trajectoryLine",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(E.prototype,"bulletPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(E.prototype,"bulletSpeed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),C=E))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var t,i,n,o,a,r,l,s,u,c,p,d,h,f,b,m,w,g,y,v,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.AudioClip,u=e.Label,c=e.Prefab,p=e.ProgressBar,d=e.UIOpacity,h=e.Vec3,f=e.Widget,b=e.view,m=e.input,w=e.Input,g=e.tween,y=e.instantiate,v=e.Component},function(e){S=e.AudioManager}],execute:function(){var _,C,L,k,z,T,E,U,B,N,G,O,I,P,A,M,H,X,x,R,V,D,F,W,Y,j,J,K,q,Q,Z,$,ee,te,ie,ne,oe,ae,re,le,se,ue,ce,pe,de,he,fe,be,me,we,ge,ye,ve,Se,_e,Ce,Le,ke,ze;a._RF.push({},"78d01dXwTJFK4V7Fl8C9e7i","GameManager",void 0);var Te=r.ccclass,Ee=r.property;e("GameManager",(_=Te("GameManager"),C=Ee({group:{name:"Playable Config"},tooltip:"iOS 商店链接"}),L=Ee({group:{name:"Playable Config"},tooltip:"Android 商店链接"}),k=Ee({type:l,tooltip:"开局提示文字节点"}),z=Ee({type:l,tooltip:"下载按钮节点"}),T=Ee({tooltip:"下载按钮的目标呼吸缩放倍数"}),E=Ee({type:l,tooltip:"横屏提示/遮罩节点"}),U=Ee({type:s,tooltip:"下载点击音效"}),B=Ee({type:u}),N=Ee({tooltip:"单局试玩总时长"}),G=Ee({type:l,tooltip:"结算面板内容容器"}),O=Ee({tooltip:"结算面板最终缩放大小"}),I=Ee({type:l,tooltip:"全屏黑色背景遮罩"}),P=Ee({type:[c]}),A=Ee({type:l}),M=Ee({type:l}),H=Ee({type:p}),X=Ee({type:u}),x=Ee({type:l}),R=Ee({tooltip:"怪物基础血量"}),V=Ee({tooltip:"每波血量递增值"}),D=Ee({type:d}),F=Ee({type:u}),W=Ee({type:l,tooltip:"震屏目标节点"}),Y=Ee({type:s}),j=Ee({type:s}),_(((ze=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"iosStoreUrl",q,o(t)),n(t,"androidStoreUrl",Q,o(t)),n(t,"startHintNode",Z,o(t)),n(t,"downloadButtonNode",$,o(t)),n(t,"downloadButtonScale",ee,o(t)),n(t,"orientationHintNode",te,o(t)),n(t,"downloadClickSound",ie,o(t)),n(t,"gameTimerLabel",ne,o(t)),n(t,"totalGameTime",oe,o(t)),n(t,"endingPanel",ae,o(t)),n(t,"endingPanelTargetScale",re,o(t)),n(t,"endingBackground",le,o(t)),n(t,"enemyPrefabs",se,o(t)),n(t,"enemyContainer",ue,o(t)),n(t,"playerNode",ce,o(t)),n(t,"xpBar",pe,o(t)),n(t,"levelLabel",de,o(t)),n(t,"levelUpUINode",he,o(t)),n(t,"baseEnemyHp",fe,o(t)),n(t,"hpIncrement",be,o(t)),n(t,"barGlow",me,o(t)),n(t,"comboLabel",we,o(t)),n(t,"shakeTarget",ge,o(t)),n(t,"levelUpSound",ye,o(t)),n(t,"winSound",ve,o(t)),n(t,"tileWidth",Se,o(t)),n(t,"tileHeight",_e,o(t)),n(t,"startY",Ce,o(t)),n(t,"topBoundary",Le,o(t)),n(t,"colCount",ke,o(t)),t._currentTime=30,t._isGameOver=!1,t._isViewable=!0,t._isRedirecting=!1,t._hasStarted=!1,t.interactionStep=0,t.activeEnemies=[],t.currentLevel=1,t.currentXp=0,t.maxXp=100,t.waveCount=0,t.comboCount=0,t._originalShakePos=new h,t._skillChoiceCount=0,t._userAgent="",t}i(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;t.instance=this,this._currentTime=this.totalGameTime,this.initUI(),this.shakeTarget&&(this._originalShakePos=this.shakeTarget.position.clone()),window.addEventListener("resize",(function(){return e.onScreenResize()})),this._userAgent=navigator.userAgent||"","undefined"!=typeof window&&(window.__playableUserAgent=this._userAgent)},a.start=function(){this.initMraid(),this.onScreenResize()},a.initUI=function(){this.gameTimerLabel&&(this.gameTimerLabel.string="Time: "+this.totalGameTime+"s"),this.updateXpUI(!1),[this.endingPanel,this.endingBackground,this.downloadButtonNode,this.startHintNode,this.orientationHintNode].forEach((function(e){e&&(e.active=!1)})),this.comboLabel&&(this.comboLabel.node.active=!1)},a.initMraid=function(){var e=this,t=window.mraid;if(void 0===t)return console.log("MRAID not found, running in browser mode."),void this.prepareAdShow();t.open&&"undefined"!=typeof window&&(window.__mraidOpen=t.open.bind(t)),"undefined"!=typeof window&&(window.__playableStoreUrls={ios:this.iosStoreUrl,android:this.androidStoreUrl}),"loading"===t.getState()?t.addEventListener("ready",(function(){e.setupMraidListeners(),t.open&&"undefined"!=typeof window&&(window.__mraidOpen=t.open.bind(t))})):this.setupMraidListeners()},a.setupMraidListeners=function(){var e=this,t=window.mraid;"function"==typeof t.isViewable&&(this._isViewable=t.isViewable(),"undefined"!=typeof window&&(window.__playableViewableState=this._isViewable)),t.addEventListener("viewableChange",(function(t){e._isViewable=t,"undefined"!=typeof window&&(window.__playableViewableState=t),t?(e.prepareAdShow(),S.inst&&S.inst.resumeBGM()):S.inst&&S.inst.pauseBGM()})),t.addEventListener("sizeChange",(function(t,i){e.onScreenResize()})),"function"==typeof t.addEventListener&&t.addEventListener("orientationChange",(function(t){e.onScreenResize(),e.forceCheckOrientation()})),"undefined"!=typeof window&&window.screen&&window.screen.orientation?window.screen.orientation.addEventListener("change",(function(){e.onScreenResize(),e.forceCheckOrientation()})):"undefined"!=typeof window&&window.addEventListener("orientationchange",(function(){e.onScreenResize(),e.forceCheckOrientation()})),this._isViewable&&this.prepareAdShow()},a.onScreenResize=function(){this.forceCheckOrientation(),this.node.getComponentsInChildren(f).forEach((function(e){return e.updateAlignment()}))},a.forceCheckOrientation=function(){if(this.orientationHintNode){var e=b.getVisibleSize(),t=e.width>e.height;this.orientationHintNode.active=t}},a.onDownloadRedirect=function(){var e=this;if(!this._isRedirecting){this._isRedirecting=!0,S.inst&&this.downloadClickSound&&S.inst.playSFX(this.downloadClickSound);var t=!!this._userAgent.match(/\(iP(hone|ad|od);/i)||!!navigator.userAgent.match(/\(iP(hone|ad|od);/i)?this.iosStoreUrl:this.androidStoreUrl;console.log("Redirecting to: "+t);var i=window.mraid;if(void 0!==i&&i.open)try{i.open(t),"undefined"!=typeof window&&(window.__mraidOpenCalled=!0,window.__mraidOpenUrl=t)}catch(e){console.error("mraid.open failed:",e),window.open(t,"_blank")}else window.open(t,"_blank");this.scheduleOnce((function(){e._isRedirecting=!1}),2)}},a.prepareAdShow=function(){var e=this;this._hasStarted||(this._hasStarted=!0,this.startHintNode&&(this.startHintNode.active=!0,this.applyLoopAnimation(this.startHintNode,1.15,.7)),S.inst&&S.inst.playBGM("BGM_Log_Turtle"),this.scheduleOnce((function(){e.spawnEnemyRow(),m.on(w.EventType.TOUCH_START,e.onStepInteraction,e)}),.1))},a.onStepInteraction=function(){var e=this;0===this.interactionStep&&(this.startHintNode?g(this.startHintNode).to(.3,{scale:new h(0,0,0)},{easing:"backIn"}).call((function(){e.startHintNode.active=!1,e.interactionStep=1,e.showInitialSkillSelection()})).start():(this.interactionStep=1,this.showInitialSkillSelection()),m.off(w.EventType.TOUCH_START,this.onStepInteraction,this))},a.update=function(e){this.interactionStep<1||this._isGameOver||!this._isViewable||(this._currentTime-=e,this._currentTime<=0&&(this._currentTime=0,this.onGameEnd()),this.gameTimerLabel&&(this.gameTimerLabel.string="Time: "+Math.ceil(this._currentTime)+"s"))},a.removeEnemy=function(e){var t=this.activeEnemies.indexOf(e);-1!==t&&this.activeEnemies.splice(t,1),0!==this.activeEnemies.length||this._isGameOver||this.nextTurn()},a.onGameEnd=function(){var e,t=this;if(!this._isGameOver){this._isGameOver=!0,S.inst&&(S.inst.stopBGM(),S.inst.playSFX(this.winSound||null));var i=null==(e=this.playerNode)?void 0:e.getComponent("PlayerController");if(i&&i.pauseInput(),this.endingBackground){this.endingBackground.active=!0;var n=this.endingBackground.getComponent(d)||this.endingBackground.addComponent(d);n.opacity=0,g(n).to(.5,{opacity:180}).start()}this.endingPanel&&(this.endingPanel.active=!0,this.endingPanel.setScale(new h(0,0,0)),g(this.endingPanel).to(.6,{scale:new h(this.endingPanelTargetScale,this.endingPanelTargetScale,1)},{easing:"backOut"}).call((function(){t.applyLoopAnimation(t.endingPanel,1.03,1.5),t.showDownloadButton()})).start())}},a.showDownloadButton=function(){var e=this;this.downloadButtonNode&&(this.downloadButtonNode.active=!0,this.downloadButtonNode.setScale(new h(0,0,0)),g(this.downloadButtonNode).to(.4,{scale:new h(this.downloadButtonScale,this.downloadButtonScale,1)},{easing:"backOut"}).call((function(){e.applyLoopAnimation(e.downloadButtonNode,1.15,.8)})).start())},a.addCombo=function(){!this._isGameOver&&this.comboLabel&&(this.comboCount++,this.comboLabel.node.active=!0,this.comboLabel.string=this.comboCount+" COMBO",g(this.comboLabel.node).stop().to(.1,{scale:new h(1.2,1.2,1)}).to(.1,{scale:new h(1,1,1)}).start())},a.resetCombo=function(){this.comboCount=0,this.comboLabel&&(this.comboLabel.node.active=!1)},a.playScreenShake=function(e){if(this.shakeTarget){var t=this._originalShakePos;g(this.shakeTarget).stop().to(.04,{position:new h(t.x+e,t.y+e,0)}).to(.04,{position:new h(t.x-e,t.y-.8*e,0)}).to(.04,{position:t}).start()}},a.addXp=function(e){var t;if(!this._isGameOver){var i=e,n=null==(t=this.playerNode)?void 0:t.getComponent("PlayerController");n&&n.skillExpGainLevel>0&&(i+=Math.floor(e*(.2*n.skillExpGainLevel))),this.currentXp+=i,this.updateXpUI(!0),this.currentXp>=this.maxXp&&this.levelUp()}},a.levelUp=function(){var e,t;if(!this._isGameOver){var i=null==(e=this.levelUpUINode)?void 0:e.getComponent("LevelUpUI");if(S.inst&&S.inst.playSFX(this.levelUpSound||null),this.currentXp-=this.maxXp,this.currentLevel++,this.maxXp=Math.floor(1.3*this.maxXp),!i||i.node.active||this._skillChoiceCount>=3)return this.playXpGlowEffect(),void this.updateXpUI(!0);var n=null==(t=this.playerNode)?void 0:t.getComponent("PlayerController");n&&n.pauseInput(),i.node.active=!0,i.show(this._skillChoiceCount),this._skillChoiceCount++,this.updateXpUI(!0)}},a.nextTurn=function(){var e=this;this._isGameOver||(this.resetCombo(),this.moveAllEnemies(),this.waveCount++,this.scheduleOnce((function(){return e.spawnEnemyRow()}),.1),this.scheduleOnce((function(){var t,i=null==(t=e.playerNode)?void 0:t.getComponent("PlayerController");i&&!e._isGameOver&&i.startNewTurn()}),.6))},a.moveAllEnemies=function(){for(var e=this.activeEnemies.length-1;e>=0;e--){var t=this.activeEnemies[e];t&&t.node&&t.node.isValid?t.moveDown(this.tileHeight):this.activeEnemies.splice(e,1)}},a.updateXpUI=function(e){if(this.levelLabel&&(this.levelLabel.string="Lv."+this.currentLevel),this.xpBar){var t=this.currentXp/(this.maxXp||100);e?g(this.xpBar).stop().to(.3,{progress:t}).start():this.xpBar.progress=t}},a.playXpGlowEffect=function(){this.barGlow&&(this.barGlow.opacity=255,g(this.barGlow).to(.4,{opacity:0}).start())},a.applyLoopAnimation=function(e,t,i){var n=new h(e.scale.x,e.scale.y,1);g(e).repeatForever(g().to(i,{scale:new h(n.x*t,n.y*t,1)},{easing:"sineInOut"}).to(i,{scale:n},{easing:"sineInOut"})).start()},a.spawnEnemyRow=function(){for(var e=-((this.colCount-1)*this.tileWidth)/2,t=Math.floor(Math.random()*(this.colCount-2))+3,i=Array.from({length:this.colCount},(function(e,t){return t})),n=0;n<t;n++){var o=i.splice(Math.floor(Math.random()*i.length),1)[0];this.createEnemyAt(o,e,this.startY,.5*Math.random())}},a.createEnemyAt=function(e,t,i,n){void 0===n&&(n=0);var o=this.enemyPrefabs.filter((function(e){return null!==e}));if(0!==o.length){var a=y(o[Math.floor(Math.random()*o.length)]);a.parent=this.enemyContainer;var r=a.getComponent("Enemy"),l=this.baseEnemyHp+this.waveCount*this.hpIncrement,s=t+e*this.tileWidth;r&&(r.init(l),r.playEntranceAnimation(new h(s,this.topBoundary+100,0),new h(s,i+this.tileHeight,0),new h(s,i,0),n),this.activeEnemies.push(r))}},a.showInitialSkillSelection=function(){var e,t,i=null==(e=this.levelUpUINode)?void 0:e.getComponent("LevelUpUI"),n=null==(t=this.playerNode)?void 0:t.getComponent("PlayerController");n&&n.pauseInput(),i&&(i.node.active=!0,i.show(0)),this._skillChoiceCount=1},t}(v)).instance=null,q=t((K=ze).prototype,"iosStoreUrl",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://apps.apple.com/app/capybara-go/id6596787726"}}),Q=t(K.prototype,"androidStoreUrl",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://play.google.com/store/apps/details?id=com.habby.capybara"}}),Z=t(K.prototype,"startHintNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(K.prototype,"downloadButtonNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(K.prototype,"downloadButtonScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.35}}),te=t(K.prototype,"orientationHintNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(K.prototype,"downloadClickSound",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(K.prototype,"gameTimerLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(K.prototype,"totalGameTime",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),ae=t(K.prototype,"endingPanel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(K.prototype,"endingPanelTargetScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),le=t(K.prototype,"endingBackground",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(K.prototype,"enemyPrefabs",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=t(K.prototype,"enemyContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(K.prototype,"playerNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(K.prototype,"xpBar",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(K.prototype,"levelLabel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(K.prototype,"levelUpUINode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(K.prototype,"baseEnemyHp",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),be=t(K.prototype,"hpIncrement",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),me=t(K.prototype,"barGlow",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(K.prototype,"comboLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(K.prototype,"shakeTarget",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(K.prototype,"levelUpSound",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(K.prototype,"winSound",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(K.prototype,"tileWidth",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 81.5}}),_e=t(K.prototype,"tileHeight",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 81.5}}),Ce=t(K.prototype,"startY",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 225}}),Le=t(K.prototype,"topBoundary",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 270}}),ke=t(K.prototype,"colCount",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),J=K))||J));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameTimer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,a,n,s,o,l,m,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,o=e.Label,l=e.Color,m=e.tween,c=e.Vec3,h=e.Component}],execute:function(){var u,p,f,L,g,_;n._RF.push({},"41769+6T2tEhJhll9bVfCLG","GameTimer",void 0);var b=s.ccclass,y=s.property;e("GameTimer",(u=b("GameTimer"),p=y(o),u((g=t((L=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"timerLabel",g,a(t)),r(t,"gameDuration",_,a(t)),t._timeLeft=0,t._isGameOver=!1,t._isUrgent=!1,t}i(t,e);var n=t.prototype;return n.start=function(){this._timeLeft=this.gameDuration,this.updateTimerDisplay()},n.update=function(e){if(!this._isGameOver&&this._timeLeft>0){var t=Math.ceil(this._timeLeft);this._timeLeft-=e;var i=Math.ceil(this._timeLeft);t!==i&&(this.updateTimerDisplay(),i<=5&&i>0&&this.playUrgentAnimation()),this._timeLeft<=5&&!this._isUrgent&&this.enterUrgentState(),this._timeLeft<=0&&(this._timeLeft=0,this.updateTimerDisplay(),this.gameOver())}},n.updateTimerDisplay=function(){this.timerLabel&&(this.timerLabel.string="Time: "+Math.ceil(this._timeLeft)+"s")},n.enterUrgentState=function(){this._isUrgent=!0,this.timerLabel&&(this.timerLabel.color=l.RED)},n.playUrgentAnimation=function(){if(this.timerLabel){var e=this.timerLabel.node;m(e).stop(),e.setScale(new c(1,1,1)),m(e).to(.1,{scale:new c(1.3,1.3,1.3)}).to(.1,{scale:new c(1,1,1)}).start()}},n.gameOver=function(){this._isGameOver||(this._isGameOver=!0,console.log("Time's up! Playable Ad Ending..."))},t}(h)).prototype,"timerLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(L.prototype,"gameDuration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),f=L))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/HidePhysics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var e,n,t,i,c,o;return{setters:[function(s){e=s.inheritsLoose},function(s){n=s.cclegacy,t=s._decorator,i=s.PhysicsSystem2D,c=s.EPhysics2DDrawFlags,o=s.Component}],execute:function(){var r;n._RF.push({},"2a6ffSKD8VJ4aJX6Aos4KSa","HidePhysics",void 0);var a=t.ccclass;s("HidePhysics",a("HidePhysics")(r=function(s){function n(){return s.apply(this,arguments)||this}return e(n,s),n.prototype.update=function(s){i.instance.debugDrawFlags!==c.None&&(i.instance.debugDrawFlags=c.None)},n}(o))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelUpUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var t,n,i,r,l,o,a,s,p,u,c,b,h,d,g,f,y,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Node,s=e.AudioClip,p=e.SpriteFrame,u=e.CCString,c=e.Label,b=e.Vec3,h=e.UIOpacity,d=e.tween,g=e.Sprite,f=e.Button,y=e.Component},function(e){m=e.AudioManager}],execute:function(){var S,w,k,v,C,E,I,P,x,_,z,B,N,D,L,F,U,T,A,O,M,X,G,H,R,j,q,J,K,V,Z,Q,W,Y,$,ee,te;l._RF.push({},"52889LHtiNB7aSik3wzZhnJ","LevelUpUI",void 0);var ne=o.ccclass,ie=o.property;e("LevelUpUI",(S=ne("LevelUpUI"),w=ie({type:a,tooltip:"主角节点"}),k=ie({type:a,tooltip:"UI内容容器"}),v=ie({type:a,tooltip:"黑色背景遮罩"}),C=ie({type:s,tooltip:"技能面板弹出音效"}),E=ie({type:s,tooltip:"点击选择技能音效"}),I=ie({type:[p],tooltip:"9个技能的图标"}),P=ie({type:[u],tooltip:"9个技能的英文名称"}),x=ie({type:[u],tooltip:"9个技能的属性描述（如 +20% ATK）"}),_=ie({group:"左侧按钮",type:a}),z=ie({group:"左侧按钮",type:c,tooltip:"左侧技能名字"}),B=ie({group:"左侧按钮",type:c,tooltip:"左侧技能描述"}),N=ie({group:"中间按钮",type:a}),D=ie({group:"中间按钮",type:c,tooltip:"中间技能名字"}),L=ie({group:"中间按钮",type:c,tooltip:"中间技能描述"}),F=ie({group:"右侧按钮",type:a}),U=ie({group:"右侧按钮",type:c,tooltip:"右侧技能名字"}),T=ie({group:"右侧按钮",type:c,tooltip:"右侧技能描述"}),S((M=t((O=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"playerNode",M,r(t)),i(t,"panelContainer",X,r(t)),i(t,"background",G,r(t)),i(t,"showSound",H,r(t)),i(t,"clickSound",R,r(t)),i(t,"skillIcons",j,r(t)),i(t,"skillNames",q,r(t)),i(t,"skillDescs",J,r(t)),i(t,"btnSpeed",K,r(t)),i(t,"labelSpeedName",V,r(t)),i(t,"labelSpeedDesc",Z,r(t)),i(t,"btnExplode",Q,r(t)),i(t,"labelExplodeName",W,r(t)),i(t,"labelExplodeDesc",Y,r(t)),i(t,"btnPierce",$,r(t)),i(t,"labelPierceName",ee,r(t)),i(t,"labelPierceDesc",te,r(t)),t._initialPanelScale=new b(1,1,1),t._breathingTweens=[],t._groupIndex=0,t}n(t,e);var l=t.prototype;return l.onLoad=function(){this.panelContainer&&(this._initialPanelScale=this.panelContainer.scale.clone()),this.node.active=!1},l.show=function(e){void 0===e&&(e=0),this._groupIndex=e%3,this.refreshCardContent(),this.node.active=!0,this.setButtonsInteractable(!1),m.inst&&(this.showSound?m.inst.playSFX(this.showSound):m.inst.playSFX("EventUI_GetSkill"));var t=this.getPlayerController();if(t&&t.pauseInput(),this.background){var n=this.background.getComponent(h)||this.background.addComponent(h);n.opacity=0,d(n).to(.3,{opacity:200}).start()}this.panelContainer&&(this.panelContainer.setScale(this._initialPanelScale),this.playStaggeredEntry())},l.refreshCardContent=function(){var e=this,t=3*this._groupIndex,n=[this.btnSpeed,this.btnExplode,this.btnPierce],i=[this.labelSpeedName,this.labelExplodeName,this.labelPierceName],r=[this.labelSpeedDesc,this.labelExplodeDesc,this.labelPierceDesc];n.forEach((function(n,l){if(n){var o=t+l,a=n.getComponent(g);a&&e.skillIcons[o]&&(a.spriteFrame=e.skillIcons[o]),i[l]&&void 0!==e.skillNames[o]&&(i[l].string=e.skillNames[o]),r[l]&&void 0!==e.skillDescs[o]&&(r[l].string=e.skillDescs[o])}}))},l.playStaggeredEntry=function(){var e=this,t=[this.btnSpeed,this.btnExplode,this.btnPierce];t.forEach((function(n,i){n&&(n.setScale(new b(0,0,1)),d(n).delay(.1*i).to(.4,{scale:new b(1,1,1)},{easing:"backOut"}).call((function(){i===t.length-1&&(e.setButtonsInteractable(!0),e.startBreathingEffect())})).start())}))},l.startBreathingEffect=function(){var e=this;this.stopBreathingEffect(),[this.btnSpeed,this.btnExplode,this.btnPierce].forEach((function(t){if(t){var n=d(t).repeatForever(d().to(1.2,{scale:new b(1.05,1.05,1)},{easing:"sineInOut"}).to(1.2,{scale:new b(1,1,1)},{easing:"sineInOut"})).start();e._breathingTweens.push(n)}}))},l.stopBreathingEffect=function(){this._breathingTweens.forEach((function(e){return e.stop()})),this._breathingTweens=[]},l.hide=function(){var e=this;this.stopBreathingEffect(),this.setButtonsInteractable(!1),this.panelContainer?d(this.panelContainer).to(.2,{scale:new b(0,0,1)},{easing:"backIn"}).call((function(){return e.closePanelLogic()})).start():this.closePanelLogic()},l.closePanelLogic=function(){this.node.active=!1;var e=this.getPlayerController();e&&e.resumeInput()},l.setButtonsInteractable=function(e){[this.btnSpeed,this.btnExplode,this.btnPierce].forEach((function(t){if(t){var n=t.getComponent(f);n&&(n.interactable=e)}}))},l.getPlayerController=function(){var e=this.node.scene.getComponentInChildren("GameManager");return e&&e.playerNode?e.playerNode.getComponent("PlayerController"):null},l.onClickSpeed=function(){var e=this.getPlayerController();e&&(0===this._groupIndex?e.upgradeSpeed():1===this._groupIndex?e.upgradeBarking():e.upgradePoison(),this.playButtonFeedback(this.btnSpeed))},l.onClickExplode=function(){var e=this.getPlayerController();e&&(0===this._groupIndex?e.upgradeExplode():1===this._groupIndex?e.upgradeEnergy():e.upgradeLateBloomer(),this.playButtonFeedback(this.btnExplode))},l.onClickPierce=function(){var e=this.getPlayerController();e&&(0===this._groupIndex?e.upgradePierce():1===this._groupIndex?e.upgradeLightning():e.upgradeExpGain(),this.playButtonFeedback(this.btnPierce))},l.playButtonFeedback=function(e){var t=this;e&&(m.inst&&(this.clickSound?m.inst.playSFX(this.clickSound):m.inst.playSFX("SkillStart_Lapuda")),this.stopBreathingEffect(),d(e).to(.1,{scale:new b(1.3,1.3,1)},{easing:"quadOut"}).to(.1,{scale:new b(1,1,1)}).delay(.1).call((function(){return t.hide()})).start())},t}(y)).prototype,"playerNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(O.prototype,"panelContainer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(O.prototype,"background",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(O.prototype,"showSound",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(O.prototype,"clickSound",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(O.prototype,"skillIcons",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=t(O.prototype,"skillNames",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(O.prototype,"skillDescs",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(O.prototype,"btnSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(O.prototype,"labelSpeedName",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(O.prototype,"labelSpeedDesc",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(O.prototype,"btnExplode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(O.prototype,"labelExplodeName",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(O.prototype,"labelExplodeDesc",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(O.prototype,"btnPierce",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(O.prototype,"labelPierceName",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(O.prototype,"labelPierceDesc",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=O))||A));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AimLineController.ts","./AimTracer.ts","./AudioManager.ts","./Ball.ts","./BulletPhysics.ts","./CharacterAnim.ts","./DamagePopup.ts","./Enemy.ts","./GameController.ts","./GameManager.ts","./GameTimer.ts","./HidePhysics.ts","./LevelUpUI.ts","./OneShotEffect.ts","./PlayerController.ts","./ReticleRotator.ts","./UIScaleAnim.ts","./XpOrb.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/OneShotEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Animation,s=t.Component}],execute:function(){var c;n._RF.push({},"cff43WresxBzaTF3BENfE8e","OneShotEffect",void 0);var r=o.ccclass;o.property,t("OneShotEffect",r("OneShotEffect")(c=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){var t=this.getComponent(i);t?(t.on(i.EventType.FINISHED,this.onFinished,this),t.play()):this.scheduleOnce(this.onFinished,1)},o.onFinished=function(){this.node.destroy()},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./GameManager.ts","./CharacterAnim.ts"],(function(e){var t,i,n,o,r,l,s,a,u,h,c,p,d,f,v,g,m,b,y,C,T,S,B,L,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,a=e.Prefab,u=e.AudioClip,h=e.v2,c=e.input,p=e.Input,d=e.Collider2D,f=e.Contact2DType,v=e.RigidBody2D,g=e.Graphics,m=e.Color,b=e.UITransform,y=e.v3,C=e.instantiate,T=e.KeyCode,S=e.Component},function(e){B=e.AudioManager},function(e){L=e.GameManager},function(e){k=e.CharacterAnim}],execute:function(){var A,E,_,P,w,D,N,O,G,x,z,I,R,V,M,K,U,F,H,X,J,W,Y,q;r._RF.push({},"5eea5YK40NPPqyVqgK17Bml","PlayerController",void 0);var j=l.ccclass,Q=l.property;e("PlayerController",(A=j("PlayerController"),E=Q({type:s,tooltip:"请拖入挂载了 AimTracer 脚本的节点"}),_=Q({type:a}),P=Q({type:k,tooltip:"请关联 CharacterAnim 脚本"}),w=Q({type:u,tooltip:"发射子弹的音效资源"}),D=Q({type:u,tooltip:"接住（回收）子弹的音效资源"}),N=Q({type:u,tooltip:"子弹掉出屏幕（回收失败）时的音效"}),O=Q({tooltip:"是否在场景中显示红绿辅助线？"}),G=Q({tooltip:"上边缘位置"}),x=Q({tooltip:"下边缘位置"}),A((R=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"aimTracerNode",R,o(t)),n(t,"bulletPrefab",V,o(t)),n(t,"characterAnim",M,o(t)),n(t,"shootSound",K,o(t)),n(t,"receiveSound",U,o(t)),n(t,"lostSound",F,o(t)),n(t,"bulletSpeed",H,o(t)),n(t,"burstCount",X,o(t)),n(t,"burstInterval",J,o(t)),n(t,"showDebugLines",W,o(t)),n(t,"topThreshold",Y,o(t)),n(t,"bottomThreshold",q,o(t)),t._isAiming=!1,t._aimDirection=h(0,1),t.canShoot=!0,t.isPlayerTurn=!0,t.bulletCount=0,t._firedBullets=0,t.returnedCount=0,t.activeBullets=[],t.isSelectingSkill=!1,t.skillSpeedLevel=0,t.hasExplosion=!1,t.pierceCount=0,t.skillBarkingLevel=0,t.skillEnergyLevel=0,t.hasLightning=!1,t.hasPoison=!1,t.skillLateLevel=0,t.skillExpGainLevel=0,t}i(t,e);var r=t.prototype;return r.start=function(){var e=this;c.on(p.EventType.TOUCH_START,this.onTouchStart,this),c.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(p.EventType.TOUCH_END,this.onTouchEnd,this),c.on(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this),c.on(p.EventType.KEY_DOWN,this.onKeyDown,this);var t=this.getComponent(d);t&&t.on(f.BEGIN_CONTACT,this.onBeginContact,this),this.scheduleOnce((function(){var t=e.getComponent(v);t&&t.isValid&&(t.fixedRotation=!0)})),this.characterAnim||(this.characterAnim=this.getComponent(k)),this.startNewTurn()},r.getTracer=function(){return this.aimTracerNode?this.aimTracerNode.getComponent("AimTracer"):null},r.update=function(e){if(this.drawDebugLines(),0!==this.activeBullets.length){this.activeBullets=this.activeBullets.filter((function(e){return e&&e.isValid}));for(var t=this.activeBullets.length-1;t>=0;t--){var i=this.activeBullets[t],n=i.getComponent("Ball");n&&n.isJustBorn||i.position.y<this.bottomThreshold&&(B.inst&&this.lostSound&&B.inst.playSFX(this.lostSound,.5),this.onBallRecycled(i))}}},r.drawDebugLines=function(){var e,t="DEBUG_BOUNDARIES_NODE",i=null==(e=this.node.parent)?void 0:e.getChildByName(t);if(this.showDebugLines){i||((i=new s(t)).parent=this.node.parent,i.addComponent(g));var n=i.getComponent(g);n.clear(),n.lineWidth=5,n.strokeColor=m.GREEN,n.moveTo(-1e3,this.topThreshold),n.lineTo(1e3,this.topThreshold),n.stroke(),n.strokeColor=m.RED,n.moveTo(-1e3,this.bottomThreshold),n.lineTo(1e3,this.bottomThreshold),n.stroke()}else i&&i.destroy()},r.onBallRecycled=function(e){if(e&&e.isValid){var t=this.activeBullets.indexOf(e);-1!==t&&this.activeBullets.splice(t,1),this.scheduleOnce((function(){e.isValid&&e.destroy()})),this.returnedCount++,this.returnedCount>=this._firedBullets&&this._firedBullets>=this.bulletCount&&this.finishTurn()}},r.finishTurn=function(){if(this.isPlayerTurn){this.isPlayerTurn=!1,this.canShoot=!1,this._isAiming=!1,this.unschedule(this.fireBullet);var e=this.getTracer();e&&e.clearLine(),this.activeBullets=[],this.returnedCount=0,this._firedBullets=0;var t=this.node.scene.getComponentInChildren("GameManager");t&&t.nextTurn()}},r.startNewTurn=function(){this.isPlayerTurn=!0,this.canShoot=!0,this.bulletCount=0,this.returnedCount=0,this._firedBullets=0,this.activeBullets=[]},r.onBeginContact=function(e,t,i){var n=this;this.scheduleOnce((function(){if(n.isValid&&t&&t.node&&t.node.isValid){var e=t.getComponent("Ball");if(e){if(e.isJustBorn)return;B.inst&&(n.receiveSound?B.inst.playSFX(n.receiveSound):B.inst.playSFX("WheelGet")),n.characterAnim&&n.characterAnim.onReceive();var i=n.node.scene.getComponentInChildren("GameManager");i&&i.playScreenShake(3),n.onBallRecycled(t.node)}}}))},r.pauseInput=function(){if(this.isSelectingSkill=!0,this._isAiming){this._isAiming=!1;var e=this.getTracer();e&&e.clearLine()}},r.resumeInput=function(){this.isSelectingSkill=!1,L.instance&&L.instance.interactionStep<2&&(L.instance.interactionStep=2)},r.onTouchStart=function(e){var t=L.instance;!t||t.interactionStep<2||t._isGameOver||this.isSelectingSkill||!this.isPlayerTurn||!this.canShoot||this.activeBullets.length>0||(this._isAiming=!0,this.processAim(e))},r.onTouchMove=function(e){this._isAiming&&this.processAim(e)},r.onTouchEnd=function(e){if(this._isAiming){this._isAiming=!1;var t=this.getTracer();t&&t.clearLine(),L.instance&&!L.instance._isGameOver&&this.fireBurst()}},r.processAim=function(e){var t,i=this,n=e.getUILocation(),o=null==(t=this.node.parent)?void 0:t.getComponent(b);if(o){var r=o.convertToNodeSpaceAR(y(n.x,n.y,0)).subtract(this.node.position).normalize();r.y<.15&&(r.y=.15),this._aimDirection.set(r.x,r.y);var l=this.getTracer();l&&l.updateAimLine(this.node.getWorldPosition(),this._aimDirection),this.scheduleOnce((function(){i.node&&i.node.isValid&&(i.node.angle=0)}))}},r.fireBurst=function(){this.canShoot=!1,this.bulletCount=this.burstCount+3*this.skillBarkingLevel;var e=this.burstInterval;this.skillSpeedLevel>0&&(e=this.burstInterval*Math.pow(.8,this.skillSpeedLevel)),this.returnedCount=0,this._firedBullets=0,this.activeBullets=[],this.unschedule(this.fireBullet),this.fireBullet(),this.bulletCount>1&&this.schedule(this.fireBullet,e,this.bulletCount-1,0)},r.fireBullet=function(){var e=this;if(L.instance&&L.instance._isGameOver)this.unschedule(this.fireBullet);else if(B.inst&&(this.shootSound?B.inst.playSFX(this.shootSound):B.inst.playSFX("MonopolyJump")),this._firedBullets++,this.characterAnim&&this.characterAnim.onAttack(),this.bulletPrefab){var t=C(this.bulletPrefab);t.active=!1,t.parent=this.node.parent;var i=this.node.worldPosition.clone();i.y+=50,t.worldPosition=i,this.scheduleOnce((function(){if(t.isValid){t.active=!0;var i=t.getComponent("Ball");i&&(i.isJustBorn=!0,i.setupSkill({isExplosive:e.hasExplosion,pierceCount:e.pierceCount,isSpeedScaling:e.skillSpeedLevel>0,isPoison:e.hasPoison,isLightning:e.hasLightning,lateBloomerLevel:e.skillLateLevel,confidenceLevel:e.skillEnergyLevel,expGainLevel:e.skillExpGainLevel}));var n=t.getComponent(v);if(n&&n.isValid){var o=(Number(e.bulletSpeed)||30)+8*e.skillEnergyLevel+10*e.skillSpeedLevel;n.linearVelocity=e._aimDirection.clone().multiplyScalar(o)}}}))}},r.onKeyDown=function(e){var t=this;e.keyCode===T.KEY_K&&this.scheduleOnce((function(){t.activeBullets.forEach((function(e){e&&e.isValid&&e.destroy()})),t.activeBullets=[],t.finishTurn()}))},r.upgradeSpeed=function(){this.skillSpeedLevel++},r.upgradeExplode=function(){this.hasExplosion=!0},r.upgradePierce=function(){this.pierceCount++},r.upgradeBarking=function(){this.skillBarkingLevel++},r.upgradeEnergy=function(){this.skillEnergyLevel++},r.upgradeLightning=function(){this.hasLightning=!0},r.upgradePoison=function(){this.hasPoison=!0},r.upgradeLateBloomer=function(){this.skillLateLevel++},r.upgradeExpGain=function(){this.skillExpGainLevel++},t}(S)).prototype,"aimTracerNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(I.prototype,"bulletPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(I.prototype,"characterAnim",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(I.prototype,"shootSound",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(I.prototype,"receiveSound",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(I.prototype,"lostSound",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"bulletSpeed",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),X=t(I.prototype,"burstCount",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),J=t(I.prototype,"burstInterval",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),W=t(I.prototype,"showDebugLines",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y=t(I.prototype,"topThreshold",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),q=t(I.prototype,"bottomThreshold",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-450}}),z=I))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/ReticleRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var c;o._RF.push({},"ed39bwbBtVJnaVW7AeNOGRN","ReticleRotator",void 0);var i=n.ccclass;t("ReticleRotator",i("ReticleRotator")(c=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.update=function(t){this.node.angle-=90*t},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIScaleAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,s,a,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Vec3,l=e.Node,c=e.tween,h=e.Component}],execute:function(){var u,p,v,E,f,S,T,d,y;r._RF.push({},"eb2382dTGhLjIhRKurvfoE4","UIScaleAnim",void 0);var _=s.ccclass,g=s.property;e("UIScaleAnim",(u=_("UIScaleAnim"),p=g({tooltip:"悬停时的缩放倍数 (例如 1.05 倍)"}),v=g({tooltip:"按下时的缩放倍数 (例如 0.95 倍)"}),E=g({tooltip:"动画时长 (秒)"}),u((T=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"hoverScaleMulti",T,o(t)),i(t,"pressScaleMulti",d,o(t)),i(t,"animDuration",y,o(t)),t._initialScale=new a,t._targetScale=new a,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this._initialScale.set(this.node.scale),this.registerEvents()},r.onDestroy=function(){this.unregisterEvents()},r.registerEvents=function(){this.node.on(l.EventType.MOUSE_ENTER,this.onHoverEnter,this),this.node.on(l.EventType.MOUSE_LEAVE,this.onHoverLeave,this),this.node.on(l.EventType.TOUCH_START,this.onPressStart,this),this.node.on(l.EventType.TOUCH_END,this.onPressEnd,this),this.node.on(l.EventType.TOUCH_CANCEL,this.onHoverLeave,this)},r.unregisterEvents=function(){this.node.off(l.EventType.MOUSE_ENTER,this.onHoverEnter,this),this.node.off(l.EventType.MOUSE_LEAVE,this.onHoverLeave,this),this.node.off(l.EventType.TOUCH_START,this.onPressStart,this),this.node.off(l.EventType.TOUCH_END,this.onPressEnd,this),this.node.off(l.EventType.TOUCH_CANCEL,this.onHoverLeave,this)},r.onHoverEnter=function(){a.multiplyScalar(this._targetScale,this._initialScale,this.hoverScaleMulti),this.runTween(this._targetScale)},r.onHoverLeave=function(){this.runTween(this._initialScale)},r.onPressStart=function(){a.multiplyScalar(this._targetScale,this._initialScale,this.pressScaleMulti),this.runTween(this._targetScale)},r.onPressEnd=function(){this.onHoverEnter()},r.runTween=function(e){c(this.node).stop(),c(this.node).to(this.animDuration,{scale:e},{easing:"sineOut"}).start()},t}(h)).prototype,"hoverScaleMulti",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.05}}),d=t(S.prototype,"pressScaleMulti",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.95}}),y=t(S.prototype,"animDuration",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),f=S))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/XpOrb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./GameManager.ts"],(function(t){var n,e,i,a,o,s,r,c,l,p,d,u,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.AudioClip,c=t.Vec3,l=t.tween,p=t.Layers,d=t.Component},function(t){u=t.AudioManager},function(t){h=t.GameManager}],execute:function(){var f,y,S,m,b;o._RF.push({},"6c2a9FkBs5CzpquFl1/insS","XpOrb",void 0);var w=s.ccclass,_=s.property;t("XpOrb",(f=w("XpOrb"),y=_({type:r,tooltip:"经验球被回收时的音效"}),f((b=n((m=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o))||this,i(n,"collectSound",b,a(n)),n.xpAmount=10,n.isAbsorbing=!1,n._currentSpeed=0,n._acceleration=6e3,n._maxSpeed=8e3,n._startDistance=0,n}e(n,t);var o=n.prototype;return o.start=function(){this.node.setScale(new c(.6,.6,1)),this.playSpawnAnim()},o.playSpawnAnim=function(){var t=this,n=120*(Math.random()-.5),e=60*Math.random()+30,i=this.node.position.clone(),a=new c(i.x+n,i.y+e,0);l(this.node).to(.2,{position:a,scale:new c(.8,.8,1)},{easing:"cubicOut"}).to(.2,{position:new c(a.x+.5*n,i.y,0)},{easing:"cubicIn"}).delay(.05).call((function(){t.upgradeToUI(),h.instance&&h.instance.xpBar&&(t._startDistance=c.distance(t.node.worldPosition,h.instance.xpBar.node.worldPosition)),t._currentSpeed=500,t.isAbsorbing=!0})).start()},o.upgradeToUI=function(){if(h.instance&&h.instance.xpBar){var t=h.instance.xpBar.node.parent;t&&(this.node.setParent(t,!0),this.node.layer=p.Enum.UI_2D,this.node.setSiblingIndex(999))}},o.update=function(t){if(this.isAbsorbing&&h.instance&&h.instance.xpBar){var n=this.node.worldPosition,e=h.instance.xpBar.node.worldPosition,i=c.distance(n,e),a=new c;c.subtract(a,e,n),a.normalize(),this._currentSpeed=Math.min(this._currentSpeed+this._acceleration*t,this._maxSpeed);var o=new c;c.multiplyScalar(o,a,this._currentSpeed*t);var s=new c;c.add(s,n,o),this.node.setWorldPosition(s),this.updateDynamicScale(i),i<50&&this.collect()}},o.updateDynamicScale=function(t){if(!(this._startDistance<=0)){var n=Math.max(0,Math.min(1,1-t/this._startDistance)),e=.6;e=n<.5?.8+2*n*(1-.8):1+2*(n-.5)*-.8,this.node.setScale(new c(e,e,1))}},o.collect=function(){u.inst&&(this.collectSound?u.inst.playSFX(this.collectSound):u.inst.playSFX("GetExp")),h.instance&&(h.instance.addXp(this.xpAmount),h.instance.playXpGlowEffect()),this.node&&this.node.isValid&&this.node.destroy()},n}(d)).prototype,"collectSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=m))||S));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});